{% extends 'new_base.html' %}
{% load static %}

{% block title %}Profile{% endblock %}

{% block content %}
    <div class="container main-container py-5">
        <div class="row gutters-sm">
            <!-- Left Column -->
            <div class="col-md-4 mb-3">
                <div class="card h-100 d-flex justify-content-center align-items-center">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <div class="w-100 h-100">
                            {% if user_obj.avatar %}
                                <img src="{{ user_obj.avatar.url }}" alt="User Avatar"
                                     class="rounded img-thumbnail mb-3 w-100 h-100 object-fit-cover">
                            {% else %}
                                <img src="{% static 'img/avatar.jpg' %}" alt="User Avatar"
                                     class="rounded img-thumbnail mb-3 w-100 h-100 object-fit-cover">
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="col-md-8">
                <div class="card mb-3 h-100">
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Nickname</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                {{ user_obj.username }}
                            </div>
                        </div>
                        <hr>
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Email</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                {{ user_obj.email }}
                            </div>
                        </div>
                        <hr>
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">First Name</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                {{ user_obj.first_name }}
                            </div>
                        </div>
                        <hr>
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Last Name</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                {{ user_obj.last_name }}
                            </div>
                        </div>
                        <hr>
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Last Login</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                {{ user_obj.last_login }}
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-12">
                                <a href="{% url 'user_update' user_obj.id %}" class="btn btn-primary mb-2 me-2">Edit
                                    Profile</a>
                                <a href="{% url 'change_email' user_obj.id %}" class="btn btn-primary mb-2 me-2">Change
                                    Email</a>
                                <a href="{% url 'change_password' user_obj.id %}" class="btn btn-primary mb-2 me-2">Change
                                    Password</a>
                                <!-- <a href="{% url 'logout' %}" class="btn btn-danger mb-2">Log Out</a> -->
                            </div>
                        </div>
                    </div>
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5 class="fw-bold">Paid Courses</h5>
                            {% if paid_courses %}
                                <ul class="list-group list-group-flush">
                                    {% for purchase in paid_courses %}
                                        <a href="{% url 'course_detail' pk=purchase.course.id %}">
                                            <div class="d-flex" style="justify-content: start; align-items: center">
                                                <img src="{{ purchase.course.image.url }}"
                                                     alt="{{ purchase.course.title }} Image" class="rounded me-3"
                                                     style="width: 100px; height: 100px; object-fit: cover;">
                                                <h5>{{ purchase.course.title }}</h5>
                                            </div>


                                        </a>

                                    {% endfor %}
                                </ul>
                            {% else %}
                                <p>No paid courses yet.</p>
                            {% endif %}
                        </div>
                    </div>
                    <div class="card-footer bg-dark-blue text-white text-center py-3">
                        <p class="mb-0">Thank you for being a part of our community!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block footer %}{% endblock %}
